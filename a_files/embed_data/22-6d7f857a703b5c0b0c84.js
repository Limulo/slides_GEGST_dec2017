webpackJsonp([22],{174:function(t,i,s){"use strict";var e=s(5),o=s(7);i.a=e.a.extend({isReady:!1,initialize:function(){if(e.a.prototype.initialize.apply(this,arguments),this.$el.addClass("btn-loading btn-disabled"),this.$el.find(".button").addClass("btn-disabled"),!o.a.me().isAuthenticated())return void this.setIsReady()},setIsReady:function(){this.isReady=!0,this.isLoading=!1,this.$el.removeClass("btn-loading btn-disabled"),this.$el.find(".button").removeClass("btn-disabled")},setIsLoading:function(){this.isReady=!1,this.isLoading=!0}})},356:function(t,i,s){"use strict";var e=s(7),o=s(11),n=s(174),a=s(4);i.a=n.a.extend({displayName:"FollowButton",optionTypes:{size:a.a.oneOf(["small","medium","large","huge"]).isRequired,afterFollowAction:a.a.func.isRequired,userUid:a.a.string,trackerEvent:a.a.string},defaultOptions:{userUid:null,trackerEvent:null,size:"medium",afterFollowAction:function(){}},events:{click:"followAction"},initialize:function(){n.a.prototype.initialize.apply(this,arguments),this.options.userUid=this.$el.attr("data-user");var t=e.a.me();if(!t.isAuthenticated()||t.uid!==this.options.userUid){t.on("change:followings",this.render,this);void 0!==t.get("followings")[this.options.userUid]&&this.render(),this.options.deferPopulation||this.populate()}},setElement:function(){return n.a.prototype.setElement.apply(this,arguments),this.setOptions({userUid:this.$el.attr("data-user")}),this.$el.find(".button").addClass("btn-"+this.options.size),this},populate:function(){var t=e.a.me();t.isAuthenticated()&&t.getFollowings([this.options.userUid])},followAction:function(t){t.stopPropagation(),this.isReady&&!this.isLoading&&(this.setIsLoading(),e.a.authenticate(function(t){var i=t.doesFollow(this.options.userUid),s=i?"unfollow":"follow";return this.toggle(!i,!0),null!==this.options.trackerEvent&&o.a[this.options.trackerEvent](this.options.userUid,"follow"===s),t[s](this.options.userUid).then(function(){this.options.afterFollowAction(s),this.setIsReady()}.bind(this))}.bind(this)))},toggle:function(t,i){var s=this.$el;s.toggleClass("toggled",t),void 0!==i&&i&&s.addClass("just-clicked").mouseleave(function(){s.removeClass("just-clicked")})},render:function(){this.toggle(e.a.me().doesFollow(this.options.userUid)),this.isLoading||this.setIsReady()}})},583:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s(2),o=s.n(e),n=s(0),a=(s.n(n),s(3)),l=s(5),d=s(356),r=s(7),h=s(31);s.n(h);i.default=l.a.extend({template:a.default.getFromMacro("skfb_front/macros/user","user_summary"),className:"user-summary hidden",initialize:function(){l.a.prototype.initialize.apply(this,arguments),o()("body").append(this.$el),this.model=new r.a,this.model.on("change",this.render.bind(this))},render:function(){this.$el.html(this.template([r.a.me().toJSON(),this.model.toJSON(),this.userOptions])),!1!==this.userOptions.followButton&&new d.a({el:this.$(".follow-user-button")[0],trackerEvent:"userSummaryFollowButtonClicked",afterFollowAction:this.onUserFollow.bind(this)})},setUser:function(t,i){i=i||{},this.userOptions=i,this.$el.addClass("loading"),this.model.clear({silent:!0}).set({uid:t},{silent:!0}).getSummary().then(function(){this.$el.removeClass("loading")}.bind(this))},onUserFollow:function(t){var i="follow"===t?1:-1,s=this.$(".follow-count span"),e=parseInt(s.text(),10);s.text(e+i)},anchor:function(t){var i=o()(t),e=this.$el.outerWidth(!0),a=o()(window).width(),l=o()(window).height(),d=s.i(n.extend)(i.offset(),{width:i.width(),height:i.height()}),r="summary-right",h="summary-bottom",u={left:"auto",right:"auto",top:"auto",bottom:"auto"};this.$el.removeClass("summary-left summary-right summary-top summary-bottom"),d.left+e>a&&(r="summary-left"),d.top-window.scrollY+300>l&&(h="summary-top"),"summary-right"===r?u.left=d.left+d.width/2-22:u.right=a-(d.left+d.width/2)-22,"summary-bottom"===h?u.top=d.top+d.height+7:u.bottom=l-(d.top+d.height/2)+22,this.$el.addClass(r+" "+h),this.$el.css(u)},show:function(){this.$el.off("transitionend webkitTransitionEnd"),this.$el.css({display:"block"}),this.$el.width(),this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden"),this.$el.one("transitionend webkitTransitionEnd",function(){this.$el.css({display:"none"})}.bind(this))},isVisible:function(){return!this.$el.hasClass("hidden")}})}});
//# sourceMappingURL=22-6d7f857a703b5c0b0c84.js.map